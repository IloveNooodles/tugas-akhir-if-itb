\subsubsection{Pengujian Blink pada RaspberryPi}

Pada pengujian sistem ini, akan dilakukan proses \textit{remote deployment} untuk menyalakan lampu blink pada RaspberryPi. Dibuat sebuah script python yang berinteraksi dengan GPIO pada pin 2 untuk menyalakan lampu LED. Script dapat dilihat pada gambar \ref{fig:raspi-python-led-script}

\begin{figure}[ht]
  \centering
  \includegraphics[width=0.8\textwidth]{resources/chapter-4/pengujian/pengujian-sistem-raspi-09-led.jpg}
  \caption{Python Raspi LED Script}
  \label{fig:raspi-python-led-script}
\end{figure}

Dari script tersebut, dibuat docker image yang membungkus python tersebut agar dapat berjalan di berbagai sistem, digunakan \textit{base image} armv7 untuk arsitektur ini. Docker image yang telah dibuat diunggah ke dockerhub dengan nama {gawrgare/led\textunderscore blink}. Isi dari dockerfile dapat dilihat pada lampiran \ref{fig:raspi-docker-led-script}. Setelah docker image tersedia, selanjutnya terdapat beberapa langkah yang harus disiapkan sebelum melakukan \textit{deployment} pada lingkungan raspberrypi.

\begin{enumerate}
  \item Membuat \textit{company} dengan nama "raspi-company" dan \textit{cluster\textunderscore name} "cluster-raspi". Hasil dapat dilihat pada gambar \ref{fig:pengujian-sistem-raspi-01}
  \item Membuat user pada \textit{company} tersebut dengan email \textit{raspi@gmail.com}. Hasil dapat dilihat pada gambar \ref{fig:pengujian-sistem-raspi-02}
  \item Login dengan kredensial yang telah dibuat
  \item Melakukan registrasi \textit{devices} untuk kedua raspi dengan daftar nama nodes yang dapat dilihat pada gambar \ref{fig:pengujian-sistem-raspi-04}
        \begin{enumerate}
          \item \textit{Device} "raspi-master" untuk \textit{hostname masterpi} dengan nama \textit{cluster} yaitu "master-node-raspi"
          \item  \textit{Device} "raspi-worker" untuk \textit{hostname raspberrypi} dengan nama \textit{cluster} yaitu "worker-node-raspi"
        \end{enumerate}
  \item Membuat groups dengan nama "raspi-group-blink". Hasil dapat dilihat pada gambar \ref{fig:pengujian-sistem-raspi-05}
  \item Menambahkan kedua device ke dalam group.
  \item Membuat repository pada halaman \textit{deployment} dengan nama "raspi-image-blink" dan image\textit{ gawrgare/led\textunderscore blink}.
  \item Membuat deployment dengan nama "raspi-deployment-blink" dan mengisi target dengan "node=master".
\end{enumerate}

Layout dari RaspberryPi serta letak kabel dan LED dapat dilihat pada gambar \ref{fig:pengujian-sistem-raspi-layout}. Setelah semua persiapan dilakukan, dilakukan pengujian dengan dua jenis \textit{deployment} yaitu \textit{target} dan \textit{custom} dengan versi \textit{group}.
\begin{enumerate}
  \item Target deployment merupakan deployment yang dilakukan sesuai dengan nilai target pada deployment object, dalam kasus ini target nya ialah node dengan attribut "node=master". Pengujian tipe ini hanya akan melakukan deployment ke \textit{device} dengan \textit{hostname masterpi} yang memiliki nama node "master-node-raspi". Setelah deployment dilakukan, LED yang terhubung dengan pin pada "master-node-raspi" akan berkedip, hal ini menunjukan bahwa proses deployment telah berhasil dilakukan. Hasil dapat dilihat pada gambar \ref{fig:hasil-pengujian-sistem-raspi-target}.
  \item Custom deployment mengabaikan nilai target yang terdapat pada objek deployment dan akan melakukan deployment sesuai jenis serta id yang diinginkan. Terdapat dua jenis yaitu \textit{group} dan \textit{device}. Dalam kasus groups, Deployment dilakukan ke dua \textit{device} yang terhubung ke \textit{group} "raspi-group-blink". Setelah deployment dilakukan, kedua LED akan berkedip menunjukan bahwa script berhasil dijalankan untuk setiap \textit{device} yang terhubung pada group. Hasil dapat dilihat pada gambar \ref{fig:hasil-pengujian-sistem-raspi-custom}.
\end{enumerate}

